"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[7706],{4137:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>u});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},m=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),d=c(n),h=i,u=d["".concat(l,".").concat(h)]||d[h]||p[h]||o;return n?a.createElement(u,r(r({ref:t},m),{},{components:n})):a.createElement(u,r({ref:t},m))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:i,r[1]=s;for(var c=2;c<o;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},6077:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var a=n(7462),i=(n(7294),n(4137));const o={title:"Working with dates and times",sidebar_position:1},r=void 0,s={unversionedId:"development/core-actionscript-classes/working-with-dates-and-times",id:"development/core-actionscript-classes/working-with-dates-and-times",title:"Working with dates and times",description:"Timing might not be everything, but it's usually a key factor in software applications. ActionScript 3.0 provides powerful ways to manage calendar dates, times, and time intervals. Two main classes provide most of this timing functionality: the Date class and the new Timer class in the flash.utils package.",source:"@site/docs/development/core-actionscript-classes/working-with-dates-and-times.md",sourceDirName:"development/core-actionscript-classes",slug:"/development/core-actionscript-classes/working-with-dates-and-times",permalink:"/docs/development/core-actionscript-classes/working-with-dates-and-times",draft:!1,editUrl:"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/core-actionscript-classes/working-with-dates-and-times.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Working with dates and times",sidebar_position:1},sidebar:"mainSidebar",previous:{title:"Creating macOS PKG installers",permalink:"/docs/tutorials/platform/macos/creating-macos-pkg-files"},next:{title:"Working with strings",permalink:"/docs/development/core-actionscript-classes/working-with-strings"}},l={},c=[{value:"Managing calendar dates and times",id:"managing-calendar-dates-and-times",level:2},{value:"Creating Date objects",id:"creating-date-objects",level:3},{value:"Getting time unit values",id:"getting-time-unit-values",level:3},{value:"Performing date and time arithmetic",id:"performing-date-and-time-arithmetic",level:3},{value:"Converting between time zones",id:"converting-between-time-zones",level:3},{value:"Controlling time intervals",id:"controlling-time-intervals",level:2},{value:"Loops versus timers",id:"loops-versus-timers",level:3},{value:"The Timer class",id:"the-timer-class",level:3},{value:"Timing functions in the flash.utils package",id:"timing-functions-in-the-flashutils-package",level:3},{value:"Date and time example: Simple analog clock",id:"date-and-time-example-simple-analog-clock",level:2},{value:"Defining the SimpleClock class",id:"defining-the-simpleclock-class",level:3},{value:"Creating the clock face",id:"creating-the-clock-face",level:3},{value:"Starting the timer",id:"starting-the-timer",level:3},{value:"Displaying the current time",id:"displaying-the-current-time",level:3}],m={toc:c},d="wrapper";function p(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Timing might not be everything, but it's usually a key factor in software applications. ActionScript 3.0 provides powerful ways to manage calendar dates, times, and time intervals. Two main classes provide most of this timing functionality: the Date class and the new Timer class in the flash.utils package."),(0,i.kt)("p",null,"Dates and times are a common type of information used in ActionScript programs. For instance, you might need to know the current day of the week or to measure how much time a user spends on a particular screen, among many other possibilities. In ActionScript, you can use the Date class to represent a single moment in time, including date and time information. Within a Date instance are values for the individual date and time units, including year, month, date, day of the week, hour, minutes, seconds, milliseconds, and time zone. For more advanced uses, ActionScript also includes the Timer class, which you can use to perform actions after a certain delay or at repeated intervals."),(0,i.kt)("h2",{id:"managing-calendar-dates-and-times"},"Managing calendar dates and times"),(0,i.kt)("p",null,"All of the calendar date and time management functions in ActionScript 3.0 are concentrated in the top-level Date class. The Date class contains methods and properties that let you handle dates and times in either Coordinated Universal Time (UTC) or in local time specific to a time zone. UTC is a standard time definition that is essentially the same as Greenwich Mean Time (GMT)."),(0,i.kt)("h3",{id:"creating-date-objects"},"Creating Date objects"),(0,i.kt)("p",null,"The Date class boasts one of the most versatile constructor methods of all the core classes. You can invoke it four different ways."),(0,i.kt)("p",null,"First, if given no parameters, the Date() constructor returns a Date object containing the current date and time, in local time based on your time zone. Here\u2019s an example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"var now:Date = new Date();\n")),(0,i.kt)("p",null,"Second, if given a single numeric parameter, the Date() constructor treats that as the number of milliseconds since January 1, 1970, and returns a corresponding Date object. Note that the millisecond value you pass in is treated as milliseconds since January 1, 1970, in UTC. However, the Date object shows values in your local time zone, unless you use the UTC-specific methods to retrieve and display them. If you create a new Date object using a single milliseconds parameter, make sure you account for the time zone difference between your local time and UTC. The following statements create a Date object set to midnight on the day of January 1, 1970, in UTC:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"var millisecondsPerDay:int = 1000 * 60 * 60 * 24; \n// gets a Date one day after the start date of 1/1/1970 \nvar startTime:Date = new Date(millisecondsPerDay);\n")),(0,i.kt)("p",null,"Third, you can pass multiple numeric parameters to the Date() constructor. It treats those parameters as the year, month, day, hour, minute, second, and millisecond, respectively, and returns a corresponding Date object. Those input parameters are assumed to be in local time rather than UTC. The following statements get a Date object set to midnight at the start of January 1, 2000, in local time:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"var millenium:Date = new Date(2000, 0, 1, 0, 0, 0, 0);\n")),(0,i.kt)("p",null,"Fourth, you can pass a single string parameter to the Date() constructor. It will try to parse that string into date or time components and then return a corresponding Date object. If you use this approach, it\u2019s a good idea to enclose the Date() constructor in a try..catch block to trap any parsing errors. The Date() constructor accepts a number of different string formats (which are listed in the ActionScript 3.0 Reference for the Adobe Flash Platform ). The following statement initializes a new Date object using a string value:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'var nextDay:Date = new Date("Mon May 1 2006 11:30:00 AM");\n')),(0,i.kt)("p",null,"If the ",(0,i.kt)("inlineCode",{parentName:"p"},"Date()")," constructor cannot successfully parse the string parameter, it will not raise an exception. However, the resulting Date object will contain an invalid date value."),(0,i.kt)("h3",{id:"getting-time-unit-values"},"Getting time unit values"),(0,i.kt)("p",null,"You can extract the values for various units of time within a Date object using properties or methods of the Date class. Each of the following properties gives you the value of a time unit in the Date object:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"fullYear")," property"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"month")," property, which is in a numeric format with 0 for January up to 11 for December"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"date")," property, which is the calendar number of the day of the month, in the range of 1 to 31"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"day")," property, which is the day of the week in numeric format, with 0 standing for Sunday"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"hours")," property, in the range of 0 to 23"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"minutes")," property"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"seconds")," property"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"milliseconds")," property")),(0,i.kt)("p",null,"In fact, the Date class gives you a number of ways to get each of these values. For example, you can get the month value of a Date object in four different ways:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"month")," property"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"getMonth()")," method"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"monthUTC")," property"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"getMonthUTC()")," method")),(0,i.kt)("p",null,"All four ways are essentially equivalent in terms of efficiency, so you can use whichever approach suits your application best."),(0,i.kt)("p",null,"The properties just listed all represent components of the total date value. For example, the milliseconds property will never be greater than 999, since when it reaches 1000 the seconds value increases by 1 and the milliseconds property resets to 0."),(0,i.kt)("p",null,"If you want to get the value of the Date object in terms of milliseconds since January 1, 1970 (UTC), you can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"getTime()")," method. Its counterpart, the ",(0,i.kt)("inlineCode",{parentName:"p"},"setTime()")," method, lets you change the value of an existing Date object using milliseconds since January 1, 1970 (UTC)."),(0,i.kt)("h3",{id:"performing-date-and-time-arithmetic"},"Performing date and time arithmetic"),(0,i.kt)("p",null,"You can perform addition and subtraction on dates and times with the Date class. Date values are kept internally in terms of milliseconds, so you should convert other values to milliseconds before adding them to or subtracting them from Date objects."),(0,i.kt)("p",null,"If your application will perform a lot of date and time arithmetic, you might find it useful to create constants that hold common time unit values in terms of milliseconds, like the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"public static const millisecondsPerMinute:int = 1000 * 60; \npublic static const millisecondsPerHour:int = 1000 * 60 * 60; \npublic static const millisecondsPerDay:int = 1000 * 60 * 60 * 24;\n")),(0,i.kt)("p",null,"Now it is easy to perform date arithmetic using standard time units. The following code sets a date value to one hour from the current time using the ",(0,i.kt)("inlineCode",{parentName:"p"},"getTime()")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"setTime()")," methods:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"var oneHourFromNow:Date = new Date(); \noneHourFromNow.setTime(oneHourFromNow.getTime() + millisecondsPerHour);\n")),(0,i.kt)("p",null,"Another way to set a date value is to create a new Date object using a single milliseconds parameter. For example, the following code adds 30 days to one date to calculate another:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"// sets the invoice date to today's date \nvar invoiceDate:Date = new Date(); \n \n// adds 30 days to get the due date \nvar dueDate:Date = new Date(invoiceDate.getTime() + (30 * millisecondsPerDay));\n")),(0,i.kt)("p",null,"Next, the ",(0,i.kt)("inlineCode",{parentName:"p"},"millisecondsPerDay")," constant is multiplied by 30 to represent 30 days\u2019 time and the result is added to the ",(0,i.kt)("inlineCode",{parentName:"p"},"invoiceDate")," value and used to set the dueDate value."),(0,i.kt)("h3",{id:"converting-between-time-zones"},"Converting between time zones"),(0,i.kt)("p",null,"Date and time arithmetic comes in handy when you want to convert dates from one time zone to another. So does the getTimezoneOffset() method, which returns the value in minutes by which the Date object\u2019s time zone differs from UTC. It returns a value in minutes because not all time zones are set to even-hour increments\u2014some have half-hour offsets from neighboring zones."),(0,i.kt)("p",null,"The following example uses the time zone offset to convert a date from local time to UTC. It does the conversion by first calculating the time zone value in milliseconds and then adjusting the Date value by that amount:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'// creates a Date in local time \nvar nextDay:Date = new Date("Mon May 1 2006 11:30:00 AM"); \n \n// converts the Date to UTC by adding or subtracting the time zone offset \nvar offsetMilliseconds:Number = nextDay.getTimezoneOffset() * 60 * 1000; \nnextDay.setTime(nextDay.getTime() + offsetMilliseconds);\n')),(0,i.kt)("h2",{id:"controlling-time-intervals"},"Controlling time intervals"),(0,i.kt)("p",null,"When you develop applications using Adobe Flash CS4 Professional, you have access to the timeline, which provides a steady, frame-by-frame progression through your application. In pure ActionScript projects, however, you must rely on other timing mechanisms."),(0,i.kt)("h3",{id:"loops-versus-timers"},"Loops versus timers"),(0,i.kt)("p",null,"In some programming languages, you must devise your own timing schemes using loop statements like for or do..while."),(0,i.kt)("p",null,"Loop statements generally execute as fast as the local machine allows, which means that the application runs faster on some machines and slower on others. If your application needs a consistent timing interval, you need to tie it to an actual calendar or clock time. Many applications, such as games, animations, and real-time controllers, need regular, time-driven ticking mechanisms that are consistent from machine to machine."),(0,i.kt)("p",null,"The ActionScript 3.0 Timer class provides a powerful solution. Using the ActionScript 3.0 event model, the Timer class dispatches timer events whenever a specified time interval is reached."),(0,i.kt)("h3",{id:"the-timer-class"},"The Timer class"),(0,i.kt)("p",null,"The preferred way to handle timing functions in ActionScript 3.0 is to use the Timer class (flash.utils.Timer), which can be used to dispatch events whenever an interval is reached."),(0,i.kt)("p",null,"To start a timer, you first create an instance of the Timer class, telling it how often to generate a timer event and how many times to do so before stopping."),(0,i.kt)("p",null,"For example, the following code creates a Timer instance that dispatches an event every second and continues for 60 seconds:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"var oneMinuteTimer:Timer = new Timer(1000, 60);\n")),(0,i.kt)("p",null,"The Timer object dispatches a TimerEvent object each time the given interval is reached. A TimerEvent object\u2019s event type is timer (defined by the constant TimerEvent.TIMER ). A TimerEvent object contains the same properties as a standard Event object."),(0,i.kt)("p",null,"If the Timer instance is set to a fixed number of intervals, it will also dispatch a timerComplete event (defined by the constant TimerEvent.TIMER_COMPLETE ) when it reaches the final interval."),(0,i.kt)("p",null,"Here is a small sample application showing the Timer class in action:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'package  \n{ \n    import flash.display.Sprite; \n    import flash.events.TimerEvent; \n    import flash.utils.Timer; \n \n    public class ShortTimer extends Sprite \n    { \n        public function ShortTimer()  \n        { \n            // creates a new five-second Timer \n            var minuteTimer:Timer = new Timer(1000, 5); \n             \n            // designates listeners for the interval and completion events \n            minuteTimer.addEventListener(TimerEvent.TIMER, onTick); \n            minuteTimer.addEventListener(TimerEvent.TIMER_COMPLETE, onTimerComplete); \n             \n            // starts the timer ticking \n            minuteTimer.start(); \n        } \n \n        public function onTick(event:TimerEvent):void  \n        { \n            // displays the tick count so far \n            // The target of this event is the Timer instance itself. \n            trace("tick " + event.target.currentCount); \n        } \n \n        public function onTimerComplete(event:TimerEvent):void \n        { \n            trace("Time\'s Up!"); \n        } \n    } \n}\n')),(0,i.kt)("p",null,"When the ShortTimer class is created, it creates a Timer instance that will tick once per second for five seconds. Then it adds two listeners to the timer: one that listens to each tick, and one that listens for the timerComplete event."),(0,i.kt)("p",null,"Next, it starts the timer ticking, and from that point forward, the onTick() method executes at one-second intervals."),(0,i.kt)("p",null,"The onTick() method simply displays the current tick count. After five seconds have passed, the onTimerComplete() method executes, telling you that the time is up."),(0,i.kt)("p",null,"When you run this sample, you should see the following lines appear in your console or trace window at the rate of one line per second:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"tick 1 \ntick 2 \ntick 3 \ntick 4 \ntick 5 \nTime's Up!\n")),(0,i.kt)("h3",{id:"timing-functions-in-the-flashutils-package"},"Timing functions in the flash.utils package"),(0,i.kt)("p",null,"ActionScript 3.0 contains a number of timing functions similar to those that were available in ActionScript 2.0. These functions are provided as package-level functions in the flash.utils package, and they operate just as they did in ActionScript 2.0."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Function"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"clearInterval(id:uint):void")),(0,i.kt)("td",{parentName:"tr",align:null},"Cancels a specified setInterval() call.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"clearTimeout(id:uint):void")),(0,i.kt)("td",{parentName:"tr",align:null},"Cancels a specified setTimeout() call.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"getTimer():int")),(0,i.kt)("td",{parentName:"tr",align:null},"Returns the number of milliseconds that have elapsed since Adobe\xae Flash\xae Player or Adobe\xae AIR\u2122 was initialized.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"setInterval(closure:Function, delay:Number, ... arguments):uint")),(0,i.kt)("td",{parentName:"tr",align:null},"Runs a function at a specified interval (in milliseconds).")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"setTimeout(closure:Function, delay:Number, ... arguments):uint")),(0,i.kt)("td",{parentName:"tr",align:null},"Runs a specified function after a specified delay (in milliseconds).")))),(0,i.kt)("p",null,"These functions remain in ActionScript 3.0 for backward compatibility. Adobe does not recommend that you use them in new ActionScript 3.0 applications. In general, it is easier and more efficient to use the Timer class in your applications."),(0,i.kt)("h2",{id:"date-and-time-example-simple-analog-clock"},"Date and time example: Simple analog clock"),(0,i.kt)("p",null,"A simple analog clock example illustrates these two date and time concepts:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Getting the current date and time and extracting values for the hours, minutes, and seconds"),(0,i.kt)("li",{parentName:"ul"},"Using a Timer to set the pace of an application")),(0,i.kt)("p",null,"To get the application files for this sample, see ",(0,i.kt)("a",{parentName:"p",href:"http://www.adobe.com/go/learn_programmingAS3samples_flash"},"www.adobe.com/go/learn_programmingAS3samples_flash")," . The SimpleClock application files can be found in the folder Samples/SimpleClock. The application consists of the following files:"),(0,i.kt)("admonition",{type:"danger"},(0,i.kt)("p",{parentName:"admonition"},"TODO this example needs to be recreated or update")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"File"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"SimpleClockApp.mxml")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"SimpleClockApp.fla")),(0,i.kt)("td",{parentName:"tr",align:null},"The main application file in Flash (FLA) or Flex (MXML).")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"com/example/programmingas3/simpleclock/SimpleClock.as")),(0,i.kt)("td",{parentName:"tr",align:null},"The main application file.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"com/example/programmingas3/simpleclock/AnalogClockFace.as")),(0,i.kt)("td",{parentName:"tr",align:null},"Draws a round clock face and hour, minute, and seconds hands based on the time.")))),(0,i.kt)("h3",{id:"defining-the-simpleclock-class"},"Defining the SimpleClock class"),(0,i.kt)("p",null,"The clock example is simple, but it\u2019s a good idea to organize even simple applications well so you could easily expand them in the future. To that end, the SimpleClock application uses the SimpleClock class to handle the startup and time-keeping tasks, and then uses another class named AnalogClockFace to actually display the time."),(0,i.kt)("p",null,"Here is the code that defines and initializes the SimpleClock class (note that in the Flash version, SimpleClock extends the Sprite class instead):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"public class SimpleClock extends UIComponent \n{ \n    /** \n     * The time display component. \n     */ \n    private var face:AnalogClockFace; \n     \n    /** \n     * The Timer that acts like a heartbeat for the application. \n     */ \n    private var ticker:Timer;\n")),(0,i.kt)("p",null,"The class has two important properties:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"face")," property, which is an instance of the AnalogClockFace class"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"ticker")," property, which is an instance of the Timer class")),(0,i.kt)("p",null,"The SimpleClock class uses a default constructor. The initClock() method takes care of the real setup work, creating the clock face and starting the Timer instance ticking."),(0,i.kt)("h3",{id:"creating-the-clock-face"},"Creating the clock face"),(0,i.kt)("p",null,"The next lines in the SimpleClock code create the clock face that is used to display the time:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"    /** \n     * Sets up a SimpleClock instance. \n     */ \n    public function initClock(faceSize:Number = 200)  \n    { \n        // creates the clock face and adds it to the display list \n        face = new AnalogClockFace(Math.max(20, faceSize)); \n        face.init(); \n        addChild(face); \n         \n        // draws the initial clock display \n        face.draw();\n")),(0,i.kt)("p",null,"The size of the face can be passed in to the ",(0,i.kt)("inlineCode",{parentName:"p"},"initClock()")," method. If no faceSize value is passed, a default size of 200 pixels is used."),(0,i.kt)("p",null,"Next, the application initializes the face and then adds it to the display list using the addChild() method inherited from the DisplayObjectContainer class. Then it calls the AnalogClockFace.draw() method to display the clock face once, showing the current time."),(0,i.kt)("h3",{id:"starting-the-timer"},"Starting the timer"),(0,i.kt)("p",null,"After creating the clock face, the initClock() method sets up a timer:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"        // creates a Timer that fires an event once per second \n        ticker = new Timer(1000);  \n     \n        // designates the onTick() method to handle Timer events \n        ticker.addEventListener(TimerEvent.TIMER, onTick); \n \n        // starts the clock ticking \n        ticker.start();\n")),(0,i.kt)("p",null,"First this method instantiates a Timer instance that will dispatch an event once per second (every 1000 milliseconds). Since no second repeatCount parameter is passed to the Timer() constructor, the Timer will keep repeating indefinitely."),(0,i.kt)("p",null,"The SimpleClock.onTick() method will execute once per second when the timer event is received:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"    public function onTick(event:TimerEvent):void  \n    { \n        // updates the clock display \n        face.draw(); \n    }\n")),(0,i.kt)("p",null,"The AnalogClockFace.draw() method simply draws the clock face and hands."),(0,i.kt)("h3",{id:"displaying-the-current-time"},"Displaying the current time"),(0,i.kt)("p",null,"Most of the code in the AnalogClockFace class involves setting up the clock face\u2019s display elements. When the AnalogClockFace is initialized, it draws a circular outline, places a numeric text label at each hour mark, and then creates three Shape objects, one each for the hour hand, the minute hand, and the second hand on the clock."),(0,i.kt)("p",null,"Once the SimpleClock application is running, it calls the AnalogClockFace.draw() method each second, as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"    /** \n     * Called by the parent container when the display is being drawn. \n     */ \n    public override function draw():void \n    { \n        // stores the current date and time in an instance variable \n        currentTime = new Date(); \n        showTime(currentTime); \n    }\n")),(0,i.kt)("p",null,"This method saves the current time in a variable, so the time can\u2019t change in the middle of drawing the clock hands. Then it calls the showTime() method to display the hands, as the following shows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"    /** \n     * Displays the given Date/Time in that good old analog clock style. \n     */ \n    public function showTime(time:Date):void  \n    { \n        // gets the time values \n        var seconds:uint = time.getSeconds(); \n        var minutes:uint = time.getMinutes(); \n        var hours:uint = time.getHours(); \n \n        // multiplies by 6 to get degrees \n        this.secondHand.rotation = 180 + (seconds * 6); \n        this.minuteHand.rotation = 180 + (minutes * 6); \n \n        // Multiply by 30 to get basic degrees, then \n        // add up to 29.5 degrees (59 * 0.5) \n        // to account for the minutes. \n        this.hourHand.rotation = 180 + (hours * 30) + (minutes * 0.5); \n    }\n")),(0,i.kt)("p",null,"First, this method extracts the values for the hours, minutes, and seconds of the current time. Then it uses these values to calculate the angle for each hand. Since the second hand makes a full rotation in 60 seconds, it rotates 6 degrees each second (360/60). The minute hand rotates the same amount each minute."),(0,i.kt)("p",null,"The hour hand updates every minute, too, so it can show some progress as the minutes tick by. It rotates 30 degrees each hour (360/12), but it also rotates half a degree each minute (30 degrees divided by 60 minutes)."))}p.isMDXComponent=!0}}]);