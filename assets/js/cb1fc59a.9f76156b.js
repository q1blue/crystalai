"use strict";(self.webpackChunkairsdk_dev=self.webpackChunkairsdk_dev||[]).push([[4882],{4137:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>u});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=p(n),h=i,u=d["".concat(s,".").concat(h)]||d[h]||m[h]||r;return n?a.createElement(u,l(l({ref:t},c),{},{components:n})):a.createElement(u,l({ref:t},c))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=h;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[d]="string"==typeof e?e:i,l[1]=o;for(var p=2;p<r;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},6543:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var a=n(7462),i=(n(7294),n(4137));const r={title:"XML in ActionScript example - Loading RSS data from the Internet",sidebar_position:12},l=void 0,o={unversionedId:"development/core-actionscript-classes/working-with-xml/xml-in-actionscript-example",id:"development/core-actionscript-classes/working-with-xml/xml-in-actionscript-example",title:"XML in ActionScript example - Loading RSS data from the Internet",description:"TODO Needs the code reference updated",source:"@site/docs/development/core-actionscript-classes/working-with-xml/xml-in-actionscript-example.md",sourceDirName:"development/core-actionscript-classes/working-with-xml",slug:"/development/core-actionscript-classes/working-with-xml/xml-in-actionscript-example",permalink:"/docs/development/core-actionscript-classes/working-with-xml/xml-in-actionscript-example",draft:!1,editUrl:"https://github.com/airsdk/airsdk.dev/edit/main/docs/development/core-actionscript-classes/working-with-xml/xml-in-actionscript-example.md",tags:[],version:"current",sidebarPosition:12,frontMatter:{title:"XML in ActionScript example - Loading RSS data from the Internet",sidebar_position:12},sidebar:"mainSidebar",previous:{title:"Reading external XML documents",permalink:"/docs/development/core-actionscript-classes/working-with-xml/reading-external-xml-documents"},next:{title:"Using native JSON functionality",permalink:"/docs/development/core-actionscript-classes/using-native-json-functionality"}},s={},p=[{value:"Reading and parsing XML data",id:"reading-and-parsing-xml-data",level:2},{value:"Assembling XMLList data",id:"assembling-xmllist-data",level:2},{value:"Extracting the title of the RSS feed and sending a custom event",id:"extracting-the-title-of-the-rss-feed-and-sending-a-custom-event",level:2}],c={toc:p},d="wrapper";function m(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"TODO Needs the code reference updated"),(0,i.kt)("p",null,"The RSSViewer sample application shows a number of features of working with XML in ActionScript, including the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Using XML methods to traverse XML data in the form of an RSS feed."),(0,i.kt)("li",{parentName:"ul"},"Using XML methods to assemble XML data in the form of HTML to use in a text field.")),(0,i.kt)("p",null,"The RSS format is widely used to syndicate news via XML. A simple RSS data file may look like the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8" ?>\n<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/">\n<channel>\n    <title>Alaska - Weather</title>\n    <link>http://www.nws.noaa.gov/alerts/ak.html</link>\n    <description>Alaska - Watches, Warnings and Advisories</description>\n\n    <item>\n        <title>\n            Short Term Forecast - Taiya Inlet, Klondike Highway (Alaska)\n        </title>\n        <link>\n            http://www.nws.noaa.gov/alerts/ak.html#A18.AJKNK.1900\n        </link>\n        <description>\n            Short Term Forecast Issued At: 2005-04-11T19:00:00\n            Expired At: 2005-04-12T01:00:00 Issuing Weather Forecast Office\n            Homepage: http://pajk.arh.noaa.gov\n        </description>\n</item>\n    <item>\n        <title>\n            Short Term Forecast - Haines Borough (Alaska)\n        </title>\n            <link>\n            http://www.nws.noaa.gov/alerts/ak.html#AKZ019.AJKNOWAJK.190000\n        </link>\n        <description>\n            Short Term Forecast Issued At: 2005-04-11T19:00:00\n            Expired At: 2005-04-12T01:00:00 Issuing Weather Forecast Office\n            Homepage: http://pajk.arh.noaa.gov\n        </description>\n    </item>\n</channel>\n</rss>\n')),(0,i.kt)("p",null,"The SimpleRSS application reads RSS data from the Internet, parses the data for headlines (titles), links, and descriptions, and returns that data. The SimpleRSSUI class provides the UI and calls the SimpleRSS class, which does all of the XML processing."),(0,i.kt)("p",null,"To get the application files for this sample, see ",(0,i.kt)("a",{parentName:"p",href:"http://www.adobe.com/go/learn_programmingAS3samples_flash"},"www.adobe.com/go/learn_programmingAS3samples_flash")," . The RSSViewer application files can be found in the folder Samples/RSSViewer. The application consists of the following files:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"File"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"RSSViewer.mxml or RSSViewer.fla"),(0,i.kt)("td",{parentName:"tr",align:null},"The main application file in Flash (FLA) or Flex (MXML).")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"com/example/programmingas3/rssViewer/RSSParser.as"),(0,i.kt)("td",{parentName:"tr",align:null},"A class that contains methods that use E4X to traverse RSS (XML) data and generate a corresponding HTML representation.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"RSSData/ak.rss"),(0,i.kt)("td",{parentName:"tr",align:null},"A sample RSS file. The application is set up to read RSS data from the web, at a Flex RSS feed hosted by Adobe. However, you can easily change the application to read RSS data from this document, which uses a slightly different schema than that of the Flex RSS feed.")))),(0,i.kt)("h2",{id:"reading-and-parsing-xml-data"},"Reading and parsing XML data"),(0,i.kt)("p",null,"The RSSParser class includes an ",(0,i.kt)("inlineCode",{parentName:"p"},"xmlLoaded()")," method that converts the input RSS data, stored in the rssXML variable, into an string containing HTML-formatted output, ",(0,i.kt)("inlineCode",{parentName:"p"},"rssOutput")," ."),(0,i.kt)("p",null,"Near the beginning of the method, code sets the default XML namespace if the source RSS data includes a default namespace:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'if (rssXML.namespace("") != undefined)\n{\n    default xml namespace = rssXML.namespace("");\n}\n')),(0,i.kt)("p",null,"The next lines then loop through the contents of the source XML data, examining each descendant property named item :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"for each (var item:XML in rssXML..item)\n{\n    var itemTitle:String = item.title.toString();\n    var itemDescription:String = item.description.toString();\n    var itemLink:String = item.link.toString();\n    outXML += buildItemHTML(itemTitle,\n                            itemDescription,\n                            itemLink);\n}\n")),(0,i.kt)("p",null,"The first three lines simply set string variables to represent the title, description and link properties of the item property of the XML data. The next line then calls the ",(0,i.kt)("inlineCode",{parentName:"p"},"buildItemHTML()")," method to get HTML data in the form of an ",(0,i.kt)("inlineCode",{parentName:"p"},"XMLList")," object, using the three new string variables as parameters."),(0,i.kt)("h2",{id:"assembling-xmllist-data"},"Assembling XMLList data"),(0,i.kt)("p",null,"The HTML data (an XMLList object) is of the following form:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<b>itemTitle</b>\n<p>\n    itemDescription\n    <br />\n    <a href="link">\n        <font color="#008000">More...</font>\n    </a>\n</p>\n')),(0,i.kt)("p",null,"The first lines of the method clear the default xml namespace:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"default xml namespace = new Namespace();\n")),(0,i.kt)("p",null,"The default xml namespace directive has function block-level scope. This means that the scope of this declaration is the ",(0,i.kt)("inlineCode",{parentName:"p"},"buildItemHTML()")," method."),(0,i.kt)("p",null,"The lines that follow assemble the XMLList, based on the string arguments passed to the function:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'var body:XMLList = new XMLList();\nbody += new XML("<b>" + itemTitle + "</b>");\nvar p:XML = new XML("<p>" + itemDescription + "</p>");\n\nvar link:XML = <a></a>;\nlink.@href = itemLink; // <link href="itemLinkString"></link>\nlink.font.@color = "#008000";\n        // <font color="#008000"></font></a>\n        // 0x008000 = green\nlink.font = "More...";\n\np.appendChild(<br/>);\np.appendChild(link);\nbody += p;\n')),(0,i.kt)("p",null,"This XMLList object represents string data suitable for an ActionScript HTML text field."),(0,i.kt)("p",null,"The xmlLoaded() method uses the return value of the buildItemHTML() method and converts it to a string:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"XML.prettyPrinting = false;\nrssOutput = outXML.toXMLString();\n")),(0,i.kt)("h2",{id:"extracting-the-title-of-the-rss-feed-and-sending-a-custom-event"},"Extracting the title of the RSS feed and sending a custom event"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"xmlLoaded()")," method sets a ",(0,i.kt)("inlineCode",{parentName:"p"},"rssTitle")," string variable, based on information in the source RSS XML data:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},"rssTitle = rssXML.channel.title.toString();\n")),(0,i.kt)("p",null,"Finally, the xmlLoaded() method generates an event, which notifies the application that the data is parsed and available:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-actionscript"},'dataWritten = new Event("dataWritten", true);\n')))}m.isMDXComponent=!0}}]);